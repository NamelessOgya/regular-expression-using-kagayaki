# 参考実装の調査  
ステータス: 完了  
  
## 背景  
正規表現部分の実装を始めるにあたり、  
0から作るよりも参考にできるものを見つけて、それをベースにつくっていくほうが作っていく方が作りやすい。  
1から我流でコーディングして、最後の方になってそもそも実装自体が間違ってましたよ、みたいな展開は避けたい。  
こういった背景から、ある程度信頼できそうな正規表現のじっそうを実装を探す。  
  
## 要件  
- ある程度信頼できる組織(個人？)が出していること。  
- C++への移植が簡単そうであること。  
- 手法が理解できること  
  
## 結果  
googleの人が書いたCでの実装を見つけた。  
[Regular Expression Matching Can Be Simple And Fast](https://swtch.com/~rsc/regexp/regexp1.html)  
NFA(non-deterministic finite automata)を使った実装  
  
[NFA](https://swtch.com/~rsc/regexp/nfa.c.txt)での実装コードはこれ
  
### 手法  
概要はだいたい理解できたと思う。  
1. 正規表現を対応する  
2. NFAと照らし合わせながら、検索対象文字列をscanしていく。  
    - scanした「文字」がstateの遷移条件を満たすなら、文字をひとつ横に遷移/ stateを遷移。(満たさないなら終了)  
    - 最終状態まで遷移したら、文字列が「マッチ」したとみなす

（画像の貼り方がわからない。）
